---
description: 企业安全项目架构实践，从入侵生命周期和漏洞生命周期两个方向讲移动端安全、网络安全、业务安全、主机安全、数据安全、内部安全、漏洞与情报、应急响应、安全运营等。
---

# 企业安全项目架构实践(草稿)

Feei <feei#feei.cn> 12/2017

> 负责企业安全项目架构设计的一点经验，先补个提纲，有空再慢慢写每个点。

## 1. 理解安全意义

### 1.1. 历史经验

#### 1.1.1. 浅谈数据泄露

> 数据是互联网企业最重要资产之一

##### 广泛传播的国内互联网厂商泄露的数据

多玩（830w）、IS语音（969w）、凡客（20w）、一号店（90w）、当当（101w）、爱拍（1100w）、猴岛（2683w）、178游戏（907w）、CSDN（642w）、7k7k小游戏（1913w）、嘟嘟牛（1610w）、人人网（476w）、天涯（3176w）、酒店开房记录（1999w）

##### 泄露但未广泛传播的国内厂商数据

微博、12306、网易、GMail、开心网、猫扑、太平洋电脑、千脑网盘、QQ群、土豆、美丽说、优酷、京东、趣店

##### 国外的数据泄露事件

Yahoo（10000000w）、LinkedIn（100000000w）、Equifax（14300w）、Uber（5700w）、Edmodo（7700w）、Verizon（1400w）、DRA（19800w）、Facebook（8700w）

##### 数据泄露对于企业的影响

轻则影响股价、重则企业没落甚至倒闭

##### 数据泄露原因

除了一些极端情况，比如AWS bucket，主要都是通过各类漏洞进入到企业服务器内部盗取数据

##### 防护数据泄露

体系化的建设，不能依赖某个点解决

#### 1.1.2. 安全重视程度

- 2017/05 WannaCry勒索病毒
- 2017/06 网络安全法
- 习近平当选国家安全小组组长

安全重视程度

### 1.2. 安全对于公司意义

## 2. 安全建设思路

### 2.1. 思路
人员少且重视不够
人员多且重视
木桶理论

### 2.2. 安全准则

先解决外部风险，再解决内部风险
能从入口解决就不要散在点上
能在底层做的不要在上层做

### 2.3. 深刻理解问题

甲方安全团队和乙方安全公司的关系？

企业内部运维、技术与安全的关系？

安全团队在公司内部状态？

不影响业务、坚守底线、耐心提高意识

安全产品是自研、购买还是使用开源？


## 3. 安全建设实践

### 3.1 入侵生命周期

不止攻焉知防

以入侵视角看待每一部分安全，思考攻击者害怕什么

#### 3.1.1. 移动端安全



- 反调试
  - 防进程、线程注入和附加
  - 防Hook攻击
  - 防内存Dump
  - App完整性保护
  - SO数据动态清除
  - 模拟器检测
  - 调试工具检测
- 反逆向
  - DEX文件加壳保护
  - DEX函数抽取加密
  - HTML开发框架保护
  - SO文件代码压缩混淆
  - SO文件加壳保护
  - SO库设备绑定
- 反篡改
  - 签名校验
  - 代码、资源文件、配置文件完整性校验
  - 配置文件加密
  - 数据库文件加密
  - 资源文件加密
- 反窃取
  - 本地数据加密
  - 通讯协议加密


#### 3.1.2. 网络安全

意义影响：



主要事项：

- HTTP Only
- HTTPS
- CSP
- DDoS
- WAF
- IPS
- IDS
- Honeypot
- 威胁情报
- 防火墙


#### 3.1.3. 业务安全



- 风控系统
- 反作弊/反垃圾
- 人机识别
  - 实名认证
  - 数字证书
  - 图形验证码
  - 滑块验证码
  - PC设备指纹
  - App设备指纹
  - 生物探针
  - 安全SDK
  - 安全键盘

#### 3.1.4. 主机安全



- 域划分/ACL
- 主机安全Agent
  - 基线检查
  - 木马查杀
  - 资产管理
  - 软件与系统漏洞
  - 文件、权限、进程、端口、命令监控
  - 命令下发
- 堡垒机

#### 3.1.5. 数据安全



- 数据库数据查询平台
- 数据资产管理
- 数据查询中间件
- 敏感数据监测

#### 3.1.6. 内部安全



- 入网管控
- 去密码化
- 终端安全

- 上网行为
- 统一权限
- 统一登录
- 操作记录


### 3.2. 漏洞生命周期

#### 3.2.1. 漏洞与情报发现



**主动情报与漏洞发现**

- 情报系统
- 白盒代码安全审计
  - 显著安全问题发现
  - 依赖安全问题发现
  - 安全问题应急
- 黑盒漏洞扫描器
  - 枚举子域名
  - GitHub敏感信息泄露
  - 流量代理
  - Web日志
  - 主机漏洞扫描
  - Web漏洞扫描
- 人工漏洞挖掘
- 渗透黑灰产

**被动情报与漏洞发现**

- 安全应急响应中心
- 工单平台

#### 3.2.2. 应急响应



- 安全评估组
- 安全委员会
- 部门安全接口人

#### 3.2.3. 漏洞管理与修复推进

- 漏洞管理平台
- 漏洞修复组件
- 漏洞修复方案

#### 3.2.4. 安全运营

- SRC
- 新媒体
  - 微信
  - 微博
- 安全规范
  - 安全编码规范
  - 框架、版本规范
  - 漏洞应急、评估、修复规范
  - ACL策略规范
  - 安全测试规范
  - 应用上线规范
  - 软件配置规范
  - ...
- 安全培训
  - 入职安全培训
  - 开发安全培训
- 安全分享
  - 内部分享、交流
  - 外部分享、交流
- 关系维护
  - 白帽子
  - SRC厂商
  - 安全会议
  - 安全媒体
  - 政府相关部门
